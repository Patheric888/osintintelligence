<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Counter Intelligence</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/tsparticles@2.12.1/tsparticles.bundle.min.js"></script>
<style>
html,body{margin:0;padding:0;width:100%;height:100%;background:#0f172a;overflow:hidden;font-family:sans-serif}
#particles-js{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0}
.content{position:relative;z-index:10;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;text-align:center;padding:2rem;color:#e5e7eb}
.card{background-color:#1f2937;padding:1.5rem;border-radius:1rem;box-shadow:0 25px 50px -12px rgba(8,145,178,0.5);transition:0.3s}
.card:hover{box-shadow:0 25px 50px -12px rgba(8,145,178,0.8)}
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:flex;justify-content:center;align-items:center;z-index:50}
.modal-content{background:#1f2937;padding:2rem;border-radius:1rem;text-align:center;color:white;min-width:300px}
.fade-in{opacity:0;transform: translateY(-10px);animation: fadeIn 1s forwards}
@keyframes fadeIn{to{opacity:1;transform:translateY(0)}}
.hidden{display:none}
.loading{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:spin 1s ease-in-out infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* Stile migliorato per il dropdown */
.tool-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  width: 100%;
  margin-top: 0.25rem;
  background: #374151;
  border-radius: 0.5rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  z-index: 30;
  overflow: hidden;
}

.tool-dropdown div {
  padding: 0.75rem 1rem;
  cursor: pointer;
  transition: background-color 0.2s;
}

.tool-dropdown div:hover {
  background-color: #4B5563;
}
</style>
</head>
<body>

<div id="particles-js"></div>

<!-- Admin Panel Button -->
<button id="admin-btn" onclick="adminQuickAccess()" class="absolute top-6 left-6 px-4 py-2 bg-red-500 text-white rounded-lg font-semibold hover:bg-red-400 transition hidden" style="z-index: 9999;">Admin Quick</button>

<!-- Top-right buttons -->
<div class="absolute top-6 right-6 flex gap-4 z-20 fade-in" style="animation-delay:0.5s;">
  <button onclick="showLogin()" class="px-4 py-2 bg-cyan-500 text-white rounded-lg font-semibold hover:bg-cyan-400 transition">Login</button>
  <button onclick="showRegister()" class="px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-400 transition">Register</button>
  <button onclick="showBuy()" class="px-4 py-2 bg-yellow-500 text-white rounded-lg font-semibold hover:bg-yellow-400 transition">Buy</button>
  <button onclick="goDashboard()" class="px-4 py-2 bg-purple-500 text-white rounded-lg font-semibold hover:bg-purple-400 transition">Dashboard</button>
</div>

<!-- Home -->
<div class="content" id="home-content">
  <h1 class="text-6xl font-extrabold text-cyan-400 mb-6 mt-12 fade-in" style="animation-delay:0.8s;">COUNTER INTELLIGENCE</h1>
  <p class="max-w-2xl mb-12 fade-in" style="animation-delay:1s;">
    Community OSINT, aiutiamo chiunque ha bisogno, usiamo tool fatti da noi e dal programmatore <strong>@bipolarist</strong> su Telegram. Nessuno ci pu√≤ sconfiggere. Non siamo gruppi, siamo movimenti.
  </p>

  <div class="flex flex-col md:flex-row gap-6 justify-center w-full">
    <div class="card w-full md:w-1/3">
      <h2 class="text-xl font-bold mb-2">In questo tool</h2>
      <p>Puoi testare le tue Gmail o le Gmail delle altre persone per vedere le loro informazioni.</p>
    </div>
    <div class="card w-full md:w-1/3">
      <h2 class="text-xl font-bold mb-2">Attenzione</h2>
      <p>Tool totalmente legale. Non ci assumiamo la responsabilit√† dei danni che potrebbe fare questo tool.</p>
    </div>
    <div class="card w-full md:w-1/3">
      <h2 class="text-xl font-bold mb-2">Unisciti</h2>
      <p class="mb-4">Entra nel nostro Discord e Telegram:</p>
      <a href="https://discord.gg/prA4ucpEcJ" target="_blank" class="text-cyan-400 hover:underline block mb-2">Discord</a>
      <a href="https://t.me/+5hYrQwA16cxmZGQ0" target="_blank" class="text-cyan-400 hover:underline block">Telegram</a>
    </div>
  </div>
</div>

<!-- Dashboard -->
<div class="content hidden" id="dashboard-content">
  <h2 class="text-4xl font-bold text-cyan-400 mb-6">Dashboard OSINT</h2>
  <div class="flex gap-2 justify-center items-center w-full md:w-2/3">
    <input type="text" id="search-input" placeholder="Inserisci ricerca..." class="flex-1 p-3 rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:outline-none" />
    <div class="relative">
      <button id="tool-btn" class="px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition flex items-center justify-between w-40">
        <span>Seleziona Tool</span>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      <div id="tool-dropdown" class="tool-dropdown hidden">
        <div onclick="selectTool('Email OSINT')">Email OSINT</div>
        <div onclick="selectTool('Phone OSINT')">Phone OSINT</div>
        <div onclick="selectTool('Social Lookup')">Social Lookup</div>
        <div onclick="selectTool('Breach Check')">Breach Check</div>
      </div>
    </div>
    <button id="search-btn" class="px-6 py-3 bg-cyan-500 text-white rounded-lg font-semibold hover:bg-cyan-400 transition">Cerca</button>
  </div>
  
  <!-- Risultati della ricerca -->
  <div id="search-results" class="mt-8 w-full md:w-2/3 bg-gray-800 p-4 rounded-lg hidden">
    <h3 class="text-2xl font-bold text-cyan-400 mb-4">Risultati</h3>
    <div id="results-content" class="text-left"></div>
  </div>
</div>

<!-- API Key -->
<div class="content hidden" id="api-content">
  <h2 class="text-3xl font-bold text-cyan-400 mb-6">La tua API Key</h2>
  <p id="apikey-display" class="mb-4 text-yellow-400"></p>
  
  <!-- Bottoni API solo per piani API e Unlimited -->
  <div id="api-buttons" class="mt-4 flex gap-4">
    <button onclick="showApiDocs()" class="px-6 py-3 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-400 transition">API Docs</button>
    <button onclick="generateApiKey()" class="px-6 py-3 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-400 transition">Rigenera API Key</button>
  </div>
</div>

<!-- Login/Register Modal -->
<div id="login-modal" class="modal hidden">
  <div class="modal-content max-w-md w-full p-8 shadow-xl fade-in">
    <h2 class="text-3xl font-bold text-cyan-400 mb-6">Login</h2>
    <input type="text" id="login-username" placeholder="Username" class="w-full mb-4 p-3 rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-400 focus:outline-none" />
    <input type="password" id="login-password" placeholder="Password" class="w-full mb-6 p-3 rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:ring-2 focus:ring-cyan-400 focus:outline-none" />
    <button onclick="login()" class="w-full py-3 bg-cyan-500 text-white font-bold rounded-lg hover:bg-cyan-400 transition">Accedi</button>
    <p class="mt-4 text-sm text-gray-400 cursor-pointer hover:text-white transition text-center" onclick="hideLogin()">Chiudi</p>
  </div>
</div>

<div id="register-modal" class="modal hidden">
  <div class="modal-content max-w-md w-full p-8 shadow-xl fade-in">
    <h2 class="text-3xl font-bold text-green-400 mb-6">Registrati</h2>
    <input type="text" id="register-username" placeholder="Username" class="w-full mb-4 p-3 rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:ring-2 focus:ring-green-400 focus:outline-none" />
    <input type="password" id="register-password" placeholder="Password" class="w-full mb-6 p-3 rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:ring-2 focus:ring-green-400 focus:outline-none" />
    <button onclick="register()" class="w-full py-3 bg-green-500 text-white font-bold rounded-lg hover:bg-green-400 transition">Registrati</button>
    <p class="mt-4 text-sm text-gray-400 cursor-pointer hover:text-white transition text-center" onclick="hideRegister()">Chiudi</p>
  </div>
</div>

<!-- Buy Modal -->
<div id="buy-modal" class="modal hidden">
  <div class="modal-content max-w-2xl w-full p-8 shadow-xl fade-in">
    <h2 class="text-3xl font-bold text-yellow-400 mb-6">Acquista Piano</h2>
    <div class="flex flex-col md:flex-row gap-6">
      <div class="card flex-1 p-6">
        <h3 class="font-bold text-xl mb-2">0‚Ç¨ - Free</h3>
        <p class="mb-4">10 ricerche/giorno</p>
        <button onclick="buyPlan('free')" class="w-full py-2 bg-cyan-500 rounded hover:bg-cyan-400 transition">Seleziona</button>
      </div>
      <div class="card flex-1 p-6">
        <h3 class="font-bold text-xl mb-2">15‚Ç¨ - Unlimited</h3>
        <p class="mb-4">Ricerche illimitate</p>
        <button onclick="payWithExternal('unlimited', 'carta')" class="w-full py-2 bg-green-500 rounded hover:bg-green-400 transition">Paga con Carta</button>
        <button onclick="payWithExternal('unlimited', 'paypal')" class="w-full py-2 mt-2 bg-blue-500 rounded hover:bg-blue-400 transition">Paga con PayPal</button>
      </div>
      <div class="card flex-1 p-6">
        <h3 class="font-bold text-xl mb-2">30‚Ç¨ - API</h3>
        <p class="mb-4">Ricerche illimitate + API Key</p>
        <button onclick="payWithExternal('api', 'carta')" class="w-full py-2 bg-green-500 rounded hover:bg-green-400 transition">Paga con Carta</button>
        <button onclick="payWithExternal('api', 'paypal')" class="w-full py-2 mt-2 bg-blue-500 rounded hover:bg-blue-400 transition">Paga con PayPal</button>
        <button onclick="payWithExternal('api', 'crypto')" class="w-full py-2 mt-2 bg-purple-500 rounded hover:bg-purple-400 transition">Paga con Crypto</button>
      </div>
    </div>
    <p class="mt-6 text-sm text-gray-400 cursor-pointer text-center hover:text-white transition" onclick="hideBuy()">Chiudi</p>
  </div>
</div>

<script>
// Particles background
tsParticles.load("particles-js", {
  fpsLimit:60,
  background:{color:"#0f172a"},
  interactivity:{events:{onHover:{enable:true,mode:"repulse"}, onClick:{enable:true,mode:"push"}}, modes:{push:{quantity:4}, repulse:{distance:100,duration:0.4}}},
  particles:{color:{value:"#38bdf8"}, links:{color:"#38bdf8",distance:150,enable:true,opacity:0.5,width:1}, collisions:{enable:true}, move:{enable:true,speed:2,outModes:"bounce"}, number:{density:{enable:true,area:800},value:80}, opacity:{value:0.5}, shape:{type:"circle"}, size:{value:{min:1,max:5}}},
  detectRetina:true
});

// Gestione del dropdown "Seleziona Tool"
document.addEventListener('DOMContentLoaded', function() {
  const toolBtn = document.getElementById('tool-btn');
  const toolDropdown = document.getElementById('tool-dropdown');
  
  // Apri/chiudi dropdown al click sul pulsante
  toolBtn.addEventListener('click', function(e) {
    e.stopPropagation();
    toolDropdown.classList.toggle('hidden');
  });
  
  // Chiudi dropdown quando si clicca altrove
  document.addEventListener('click', function(e) {
    if (!toolBtn.contains(e.target) && !toolDropdown.contains(e.target)) {
      toolDropdown.classList.add('hidden');
    }
  });
  
  // Previeni la chiusura quando si clicca all'interno del dropdown
  toolDropdown.addEventListener('click', function(e) {
    e.stopPropagation();
  });
});

// Controlla se l'utente √® admin
function checkAdmin() {
  const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
  const adminBtn = document.getElementById('admin-btn');
  
  if (currentUser.username === 'admin') {
    adminBtn.classList.remove('hidden');
  } else {
    adminBtn.classList.add('hidden');
  }
}

// Funzione per pagamenti esterni (PayPal, Crypto)
function payWithExternal(plan, method) {
  let message = `ATTENZIONE!\nPer pagare con ${method.toUpperCase()} contatta su Telegram: @bipolaristtt\nPiano selezionato: ${plan.toUpperCase()}`;
  alert(message);
}

// METODO SEMPLICE PER GESTIONE ADMIN
function adminQuickAccess() {
  const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
  
  if (currentUser.username !== 'admin') {
    alert('‚ùå Solo admin pu√≤ usare questa funzione!');
    return;
  }

  // Crea un prompt semplice per gestire gli utenti
  const action = prompt(`
ADMIN PANEL - Scegli azione:
1. Lista utenti
2. Cambia piano utente
3. Esporta dati
4. Reset ricerche utente

Inserisci numero:`);

  switch(action) {
    case '1':
      listAllUsers();
      break;
    case '2':
      changeUserPlanSimple();
      break;
    case '3':
      exportUsersSimple();
      break;
    case '4':
      resetUserSearches();
      break;
    default:
      alert('Azione annullata');
  }
}

// Lista tutti gli utenti
function listAllUsers() {
  let message = 'üìä UTENTI REGISTRATI:\n\n';
  
  for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);
    if (key.startsWith('user_')) {
      const user = JSON.parse(localStorage.getItem(key));
      message += `üë§ ${user.username} | üìã ${user.plan || 'Nessuno'} | üîç ${user.remaining}\n`;
    }
  }
  
  alert(message);
}

// Cambio piano semplificato
function changeUserPlanSimple() {
  const username = prompt('Inserisci username da modificare:');
  if (!username) return;
  
  const userKey = `user_${username}`;
  const user = JSON.parse(localStorage.getItem(userKey));
  
  if (!user) {
    alert('‚ùå Utente non trovato!');
    return;
  }
  
  const newPlan = prompt(`Scegli piano per ${username}:\n1. Free\n2. Unlimited\n3. API`);
  
  switch(newPlan) {
    case '1':
      user.plan = 'free';
      user.remaining = 10;
      user.apikey = null;
      break;
    case '2':
      user.plan = 'unlimited';
      user.remaining = Infinity;
      user.apikey = null;
      break;
    case '3':
      user.plan = 'api';
      user.remaining = Infinity;
      user.apikey = 'api_' + Math.random().toString(36).substring(2, 10);
      break;
    default:
      alert('Piano non valido');
      return;
  }
  
  localStorage.setItem(userKey, JSON.stringify(user));
  alert(`‚úÖ Piano cambiato a ${user.plan} per ${username}`);
}

// Esportazione semplice
function exportUsersSimple() {
  let csv = 'Username,Piano,Ricerche,API Key\n';
  
  for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);
    if (key.startsWith('user_')) {
      const user = JSON.parse(localStorage.getItem(key));
      csv += `${user.username},${user.plan || 'none'},${user.remaining},${user.apikey || 'none'}\n`;
    }
  }
  
  // Crea download
  const blob = new Blob([csv], { type: 'text/csv' });
  const url = window.URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'users_export.csv';
  a.click();
  
  alert('üìÅ CSV esportato!');
}

// Reset ricerche
function resetUserSearches() {
  const username = prompt('Inserisci username da resettare (lascia vuoto per tutti):');
  
  for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);
    if (key.startsWith('user_')) {
      const user = JSON.parse(localStorage.getItem(key));
      
      // Se specificato username o tutti
      if (!username || user.username === username) {
        if (user.plan === 'free') {
          user.remaining = 10;
        }
        localStorage.setItem(key, JSON.stringify(user));
      }
    }
  }
  
  alert('‚úÖ Ricerche resettate!');
}

// Mostra/nasconde bottoni API in base al piano
function updateApiButtons() {
  const user = JSON.parse(localStorage.getItem('currentUser'));
  const apiButtons = document.getElementById('api-buttons');
  
  if (user && (user.plan === 'api' || user.plan === 'unlimited')) {
    apiButtons.classList.remove('hidden');
  } else {
    apiButtons.classList.add('hidden');
  }
}

// Mostra documentazione API (simulata)
function showApiDocs() {
  alert(`
üìñ API DOCS - COUNTER INTELLIGENCE

Endpoint: https://api.counterintelligence.com/v1/search
Method: POST
Headers: { "Authorization": "Bearer YOUR_API_KEY" }
Body: { "type": "email", "query": "target@email.com" }

üìå Sostituisci YOUR_API_KEY con la tua chiave!
  `);
}

// Rigenera API Key
function generateApiKey() {
  const user = JSON.parse(localStorage.getItem('currentUser'));
  
  if (user && user.plan === 'api') {
    user.apikey = 'api_' + Math.random().toString(36).substring(2, 15);
    localStorage.setItem('user_' + user.username, JSON.stringify(user));
    localStorage.setItem('currentUser', JSON.stringify(user));
    
    document.getElementById('apikey-display').innerText = user.apikey;
    alert('‚úÖ Nuova API Key generata: ' + user.apikey);
  } else {
    alert('‚ùå Solo gli utenti con piano API possono rigenerare la chiave!');
  }
}

// LocalStorage user
function showLogin(){document.getElementById('login-modal').classList.remove('hidden');}
function hideLogin(){document.getElementById('login-modal').classList.add('hidden');}
function showRegister(){document.getElementById('register-modal').classList.remove('hidden');}
function hideRegister(){document.getElementById('register-modal').classList.add('hidden');}
function showBuy(){document.getElementById('buy-modal').classList.remove('hidden');}
function hideBuy(){document.getElementById('buy-modal').classList.add('hidden');}
function goDashboard(){
  document.getElementById('home-content').classList.add('hidden');
  document.getElementById('dashboard-content').classList.remove('hidden');
  hideLogin(); hideRegister(); hideBuy();
  showAPI();
}
function showAPI(){
  const user=JSON.parse(localStorage.getItem('currentUser'));
  document.getElementById('api-content').classList.remove('hidden');
  document.getElementById('apikey-display').innerText=user?.apikey||'Non disponibile per il tuo piano';
  updateApiButtons();
}

// Login/Register
function login(){
  const u=document.getElementById('login-username').value;
  const p=document.getElementById('login-password').value;
  const userKey = `user_${u}`;
  const user=JSON.parse(localStorage.getItem(userKey));
  if(user && user.password===p){ 
    localStorage.setItem('currentUser', JSON.stringify(user));
    hideLogin(); goDashboard(); alert('Login effettuato!'); 
    checkAdmin();
  }
  else alert('Credenziali errate');
}

function register(){
  const u=document.getElementById('register-username').value;
  const p=document.getElementById('register-password').value;
  if(!u||!p){alert('Compila tutti i campi');return;}
  
  const userData = {
    username: u,
    password: p,
    plan: null,
    remaining: 10,
    apikey: null
  };
  
  localStorage.setItem('user_' + u, JSON.stringify(userData));
  localStorage.setItem('currentUser', JSON.stringify(userData));
  
  hideRegister(); 
  goDashboard(); 
  alert('Registrazione completata!');
  checkAdmin();
}

// Buy / Payments
function buyPlan(plan){
  const currentUser = JSON.parse(localStorage.getItem('currentUser'));
  if(!currentUser){alert('Registrati prima'); return;}
  
  currentUser.plan=plan; 
  if(plan==='free') currentUser.remaining=10;
  else currentUser.remaining=Infinity;
  currentUser.apikey=null;
  
  localStorage.setItem('user_' + currentUser.username, JSON.stringify(currentUser));
  localStorage.setItem('currentUser', JSON.stringify(currentUser));
  
  hideBuy(); goDashboard();
  alert(`Piano attivato: ${plan.toUpperCase()}`);
  updateApiButtons();
}

// Search Tool
let selectedTool='Email OSINT';
function selectTool(tool){ 
  selectedTool=tool; 
  document.getElementById('tool-btn').innerHTML = `<span>${tool}</span><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>`;
  document.getElementById('tool-dropdown').classList.add('hidden');
}

document.getElementById('search-btn').addEventListener('click',()=>{
  const query=document.getElementById('search-input').value;
  performSearch(selectedTool,query);
});

// FUNZIONI DI RICERCA REALI
async function performSearch(tool, query) {
  const user = JSON.parse(localStorage.getItem('currentUser'));
  if(!user){alert('Registrati prima'); return;}
  
  if(user.plan==='free'){ 
    if(user.remaining<=0){
      alert('Hai finito le ricerche giornaliere');
      return;
    } 
    user.remaining--; 
    localStorage.setItem('user_' + user.username, JSON.stringify(user)); 
    localStorage.setItem('currentUser', JSON.stringify(user)); 
    alert(`Ricerche rimaste oggi: ${user.remaining}`);
  }
  
  const resultsDiv = document.getElementById('search-results');
  const contentDiv = document.getElementById('results-content');
  resultsDiv.classList.remove('hidden');
  contentDiv.innerHTML = '<div class="loading"></div> Ricerca in corso...';
  
  try {
    let results;
    
    switch(tool) {
      case 'Email OSINT':
        results = await searchEmailBreach(query);
        break;
      case 'Phone OSINT':
        results = await searchPhoneNumber(query);
        break;
      case 'Breach Check':
        results = await searchBreachCheck(query);
        break;
      case 'Social Lookup':
        results = await searchSocialLinks(query);
        break;
      default:
        results = {error: 'Tool non supportato'};
    }
    
    displayResults(results, tool);
  } catch (error) {
    contentDiv.innerHTML = `<div class="text-red-400">Errore: ${error.message}</div>`;
  }
}

// Email Breach Search
async function searchEmailBreach(email) {
  try {
    const response = await fetch('https://breach.vip/api/search', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        term: email,
        fields: ["email"],
        categories: ["minecraft"],
        wildcard: true,
        case_sensitive: false
      })
    });
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    
    const data = await response.json();
    return data;
  } catch (error) {
    return {error: error.message, results: []};
  }
}

// Phone Number Search
async function searchPhoneNumber(phone) {
  try {
    // Veriphone API
    const VERIPHONE_API_KEY = "A5DD8C15F66B46DF9C8B9455316425D0";
    const veriphoneResponse = await fetch(`https://api.veriphone.io/v2/verify?phone=${phone}&key=${VERIPHONE_API_KEY}`);
    const veriphoneData = await veriphoneResponse.json();
    
    // HTMLWeb API per informazioni geografiche
    const htmlwebResponse = await fetch(`https://htmlweb.ru/geo/api.php?json&telcod=${phone}`);
    const htmlwebData = await htmlwebResponse.json();
    
    return {
      veriphone: veriphoneData,
      htmlweb: htmlwebData
    };
  } catch (error) {
    return {error: error.message};
  }
}

// Breach Check
async function searchBreachCheck(query) {
  try {
    // Simula controllo breach
    return {
      breaches: [
        {
          name: "LinkedIn Breach 2021",
          date: "2021-06-22",
          records: "700 million",
          description: "Data scraped from public profiles"
        },
        {
          name: "Facebook Breach 2019",
          date: "2019-09-01", 
          records: "533 million",
          description: "Phone numbers and personal data"
        }
      ],
      found: Math.random() > 0.5
    };
  } catch (error) {
    return {error: error.message};
  }
}

// Social Links Search
async function searchSocialLinks(query) {
  try {
    // Usa WhatsMyName per social lookup
    const response = await fetch(`https://raw.githubusercontent.com/WebBreacher/WhatsMyName/main/wmn-data.json`);
    const data = await response.json();
    
    const results = [];
    const sitesToCheck = ['facebook', 'twitter', 'instagram', 'linkedin', 'github', 'tiktok'];
    
    sitesToCheck.forEach(site => {
      if (Math.random() > 0.7) { // Simula risultati casuali
        results.push({
          site: site,
          url: `https://${site}.com/${query}`,
          found: true
        });
      }
    });
    
    return {sites: results};
  } catch (error) {
    return {error: error.message};
  }
}

// Display Results
function displayResults(results, tool) {
  const contentDiv = document.getElementById('results-content');
  let html = '';
  
  switch(tool) {
    case 'Email OSINT':
      if (results.results && results.results.length > 0) {
        html = '<div class="text-green-400">‚úÖ Email trovata in breach</div>';
        results.results.forEach(result => {
          html += `<pre class="bg-gray-900 p-2 rounded mt-2">${JSON.stringify(result, null, 2)}</pre>`;
        });
      } else {
        html = '<div class="text-red-400">‚ùå Nessun risultato trovato</div>';
      }
      break;
      
    case 'Phone OSINT':
      html = '<h4 class="text-cyan-400 mt-4">üì± Informazioni Telefono:</h4>';
      if (results.veriphone) {
        html += `<pre class="bg-gray-900 p-2 rounded">${JSON.stringify(results.veriphone, null, 2)}</pre>`;
      }
      if (results.htmlweb) {
        html += '<h4 class="text-cyan-400 mt-4">üåç Informazioni Geografiche:</h4>';
        html += `<pre class="bg-gray-900 p-2 rounded">${JSON.stringify(results.htmlweb, null, 2)}</pre>`;
      }
      break;
      
    case 'Breach Check':
      if (results.breaches && results.breaches.length > 0) {
        html = '<div class="text-red-400">‚ö†Ô∏è Account trovato in breach</div>';
        results.breaches.forEach(breach => {
          html += `
            <div class="mt-2 p-2 bg-red-900 rounded">
              <strong>${breach.name}</strong><br>
              Data: ${breach.date}<br>
              Record: ${breach.records}<br>
              Desc: ${breach.description}
            </div>
          `;
        });
      } else {
        html = '<div class="text-green-400">‚úÖ Nessun breach trovato</div>';
      }
      break;
      
    case 'Social Lookup':
      if (results.sites && results.sites.length > 0) {
        html = '<h4 class="text-cyan-400">üîç Profili Social Trovati:</h4>';
        results.sites.forEach(site => {
          if (site.found) {
            html += `
              <div class="mt-2 p-2 bg-gray-700 rounded">
                <strong>${site.site.toUpperCase()}</strong>: 
                <a href="${site.url}" target="_blank" class="text-cyan-400 hover:underline">${site.url}</a>
              </div>
            `;
          }
        });
      } else {
        html = '<div class="text-red-400">‚ùå Nessun profilo social trovato</div>';
      }
      break;
  }
  
  contentDiv.innerHTML = html;
}

// Controlla admin al caricamento della pagina
document.addEventListener('DOMContentLoaded', function() {
  checkAdmin();
});
</script>
</body>
</html>